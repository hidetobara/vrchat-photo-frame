
FROM python:3.11-slim

RUN apt update -y && apt upgrade -y && apt -y install python3-pip vim less \
	&& apt clean
RUN pip3 install gspread Pillow boto3 google-api-python-client google-auth google-auth-httplib2 google-auth-oauthlib \
    flask gunicorn pydantic pydantic-settings streamlit

WORKDIR /app
COPY . ./

CMD exec gunicorn --bind :8080 -w 2 api:app

# docker build -t vrchat-sync-frame .
# docker run --rm -it -p 8080:8080 --env-file .env -v c/obara/vrchat-photo-frame/server:/app vrchat-sync-frame /bin/bash
# docker run --rm -p 8080:8080 --env-file .env vrchat-sync-frame
# docker run --rm -p 8080:8080 --env-file .env vrchat-sync-frame streamlit run web.py --server.port 8080
# docker tag vrchat-sync-frame asia-northeast1-docker.pkg.dev/vrchat-photo-frame/server/sync-frame
# docker image push asia-northeast1-docker.pkg.dev/vrchat-photo-frame/server/sync-frame
